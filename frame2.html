<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Frame2</title>
    <link href="./style.css" rel="stylesheet" />
  </head>

  <body>
    <div>Frame2</div>
    <div>
      <button id="openButton">Open Frame3</button>
      <button id="closeButton">Close</button>
    </div>

    <script type="module">
      import { openIFrameDialog, closeIFrameDialog } from "./lib.js";

      let ports;

      window.onmessage = (e) => {
        if (e.data.type === "init") {
          ports = e.ports;
        }
      };

      document.addEventListener("DOMContentLoaded", init);

      function init() {
        const openButton = document.querySelector("#openButton");
        const closeButton = document.querySelector("#closeButton");

        openButton.addEventListener("click", () =>
          openIFrameDialog({ src: "./frame3.html" })
        );
        closeButton.addEventListener("click", () => closeIFrameDialog("close",ports));
      }
    </script>
  </body>
</html>
