<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Frame1</title>
    <link href="./style.css" rel="stylesheet" />
  </head>

  <body>
    <div>Frame1</div>
    <div>
      <button id="ok">OK</button>
      <input type="text" id="textbox" value="1" />
    </div>

    <script type="module">
      import { closeIFrameDialog } from "./lib.js";

      window.onmessage = (e) => {
        if (e.data.type === "init") {
          init(e.data.params, e.ports);
        }
      };

      function init(params, ports) {
        console.log("init", params, ports);

        const ok = document.querySelector("#ok");
        const textbox = document.querySelector("#textbox");

        ok.addEventListener("click", () =>
          closeIFrameDialog(textbox.value, ports)
        );
      }
    </script>
  </body>
</html>
